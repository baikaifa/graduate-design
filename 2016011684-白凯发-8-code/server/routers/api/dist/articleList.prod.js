"use strict";var express=require("express"),router=express.Router(),passport=require("passport"),ArticleList=require("../../models/ArticleList");router.get("/test",function(t,e){e.json({msg:"articleList works"})}),router.get("/",passport.authenticate("jwt",{session:!1}),function(t,e){ArticleList.find().then(function(t){if(!t)return e.status(404).json("没有任何内容");e.json(t)}).catch(function(t){return e.status(404).json(t)})}),router.post("/add",passport.authenticate("jwt",{session:!1}),function(t,e){var o={};t.body.imgUrl&&(o.imgUrl=t.body.imgUrl),t.body.title&&(o.title=t.body.title),t.body.desc&&(o.desc=t.body.desc),t.body.id&&(o.id=t.body.id),t.body.Like&&(o.Like=t.body.Like),t.body.Comment&&(o.Comment=t.body.Comment),t.body.inputValue&&(o.inputValue=t.body.inputValue),t.body.CommentList&&(o.CommentList=t.body.CommentList),new ArticleList(o).save().then(function(t){e.json(t)}).catch(function(t){return e.json(t)})}),router.post("/edit/:id",passport.authenticate("jwt",{session:!1}),function(t,e){var o={};t.body.imgUrl&&(o.imgUrl=t.body.imgUrl),t.body.title&&(o.title=t.body.title),t.body.desc&&(o.desc=t.body.desc),t.body.id&&(o.id=t.body.id),t.body.Like&&(o.Like=t.body.Like),t.body.Comment&&(o.Comment=t.body.Comment),t.body.inputValue&&(o.inputValue=t.body.inputValue),t.body.CommentList&&(o.CommentList=t.body.CommentList),console.log(o),ArticleList.findOneAndUpdate({_id:t.params.id},{$set:o},{new:!0}).then(function(t){return e.json(t)}).catch(function(t){return e.json("编辑失败")})}),router.delete("/delete/:id",passport.authenticate("jwt",{session:!1}),function(t,e){ArticleList.findOneAndDelete({_id:t.params.id}).then(function(t){t.save().then(function(t){return e.json(t)})}).catch(function(t){return e.status(404).json("删除失败")})}),module.exports=router;